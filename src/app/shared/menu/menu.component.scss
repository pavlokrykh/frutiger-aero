:host {
  position: fixed;
  top: 16px;
  left: 16px;
  z-index: 1000;
  pointer-events: none;
}

.menu {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  pointer-events: none;
}

.nav-menu {
  position: relative;
  width: 220px;
  height: 420px;
  margin-top: 12px;

  // Enable goo filter for surface tension merge
  filter: url('#goo') drop-shadow(0 8px 16px rgba(0, 0, 0, 0.18));
  isolation: isolate; // avoid blending with background
  // Allow fly-out to extend beyond the container
  contain: layout; // remove paint containment so overflow is visible
  overflow: visible;
  transform: translateX(-50%); // anchor cluster horizontally under toggle center
  transition: opacity 240ms ease;
  z-index: 1;
}

.menu-toggle {
  font-weight: 600;
  position: relative;
  z-index: 2;
  cursor: pointer;
}

// Hide interaction and visuals when closed so the cluster doesn't block clicks
// Keep visible for fly-in/out animation but disable interaction when closed
.menu:not(.is-open) .nav-menu { pointer-events: none; }
.menu.is-open .nav-menu { pointer-events: auto; }

// Base bubble look is controlled globally, here we adjust scale by size var
.nav-menu [bubble] {
  --bubble-size: 48px;
  width: var(--bubble-size);
  height: var(--bubble-size);
  padding: 0;
  font-size: 13px;
  position: absolute;
  left: 0;
  top: 0;
  cursor: pointer;
  opacity: 1;
}

// When menu closed, bubbles still render but open progress drives transform to center
.menu:not(.is-open) .nav-menu [bubble] {
  pointer-events: none !important;
}
